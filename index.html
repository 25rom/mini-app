<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Карты Намерений</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #f5f5f7;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            overflow: hidden;
        }

        .scene {
            width: 300px;  /* Ширина карточки на экране */
            height: 120px; /* Высота карточки (подобрал под твои продолговатые карты) */
            perspective: 1000px;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Плавная пружинистая анимация */
            transform-style: preserve-3d;
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        .card__face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            overflow: hidden; /* Чтобы картинка не вылезала за углы */
        }

        .card__face--front {
            background-color: #fff;
        }

        .card__face--back {
            background-color: #fff;
            transform: rotateY(180deg);
        }

        img {
            width: 100%;
            height: 100%;
            object-fit: contain; /* Картинка будет видна целиком */
            display: block;
        }

        .instruction {
            margin-top: 10px;
            color: #8e8e93;
            font-size: 14px;
            opacity: 0.8;
        }

        .draw-btn {
            margin-top: 40px;
            padding: 16px 32px;
            background-color: #007aff; /* Цвет кнопки как в iOS */
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
            transition: transform 0.1s, background-color 0.2s;
            -webkit-tap-highlight-color: transparent;
        }

        .draw-btn:active {
            transform: scale(0.96);
            background-color: #0056b3;
        }
    </style>
</head>
<body>

    <div class="scene" onclick="flipCard()">
        <div class="card" id="myCard">
            <!-- Лицевая сторона -->
            <div class="card__face card__face--front">
                <img id="frontImg" src="" alt="">
            </div>
            <!-- Оборотная сторона -->
            <div class="card__face card__face--back">
                <img id="backImg" src="" alt="">
            </div>
        </div>
    </div>

    <div class="instruction" id="hintText">Нажми на карту</div>

    <button class="draw-btn" onclick="drawNewCard()">Тянуть карту</button>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // ==========================================
        // НАСТРОЙКИ: ВОТ ЗДЕСЬ ТВОИ КАРТОЧКИ
        // ==========================================
        
        // Просто перечисли названия файлов. 
        // Важно: Файлы должны лежать в папке img/
        
        const cardsDatabase = [
            { 
                front: 'reshimost.jpg',      // Имя файла картинки-слова
                back: 'reshimost_back.jpg'   // Имя файла картинки-описания/асаны
            },
            { 
                front: 'zabota.jpg', 
                back: 'zabota_back.jpg' 
            },
            { 
                front: 'igrivost.jpg', 
                back: 'igrivost_back.jpg' 
            },
             { 
                front: 'disciplina.jpg', 
                back: 'back1.jpg' 
            },
             { 
                front: 'igrivost.jpg', 
                back: 'igrivost_back.jpg' 
            },
             { 
                front: 'estestven.jpg', 
                back: 'back2.jpg' 
            },
             { 
                front: 'odnorod.jpg', 
                back: 'odnorod_back.jpg' 
            },
             { 
                front: 'otvaga.jpg', 
                back: 'back2.jpg' 
            },
             { 
                front: 'samobyt.jpg', 
                back: 'back2.jpg' 
            },
              { 
                front: 'smelost.jpg', 
                back: 'back2.jpg' 
            },
              { 
                front: 'starat.jpg', 
                back: 'back2.jpg' 
            },
            { 
                front: 'uporstvo.jpg', 
                back: 'back2.jpg' 
            },
            { 
                front: 'vnimat.jpg', 
                back: 'back2.jpg' 
            },
            { 
                front: 'zabota.jpg', 
                back: 'back2.jpg' 
            }
             ];  
            // Скопируй блок { ... }, чтобы добавить следующую карту
            // Не забудь запятую между блоками!

        // ==========================================

        const cardElement = document.getElementById('myCard');
        const frontImg = document.getElementById('frontImg');
        const backImg = document.getElementById('backImg');
        const hintText = document.getElementById('hintText');

        function drawNewCard() {
            // Если карта перевернута, вернем её назад перед сменой
            if (cardElement.classList.contains('is-flipped')) {
                cardElement.classList.remove('is-flipped');
                setTimeout(updateImages, 300); // Ждем пока перевернется
            } else {
                updateImages();
            }
        }

        function updateImages() {
            // Случайный выбор
            const randomIndex = Math.floor(Math.random() * cardsDatabase.length);
            const selectedPair = cardsDatabase[randomIndex];

            // Подставляем пути к картинкам
            // Внимание: здесь указана папка 'img/'
            frontImg.src = 'img/' + selectedPair.front;
            backImg.src = 'img/' + selectedPair.back;
            
            // Если вдруг картинка не прогрузилась (опечатка), выведем ошибку в консоль
            frontImg.onerror = function() { console.error("Не найдена картинка: " + this.src) };
        }

        function flipCard() {
            cardElement.classList.toggle('is-flipped');
            
            // Меняем текст подсказки
            if (cardElement.classList.contains('is-flipped')) {
                hintText.innerText = "Нажми еще раз, чтобы закрыть";
            } else {
                hintText.innerText = "Нажми на карту, чтобы перевернуть";
            }
        }

        // Запуск первой карты при старте
        drawNewCard();

    </script>
</body>
</html>
